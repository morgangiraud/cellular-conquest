(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{5338:function(t,e,s){Promise.resolve().then(s.t.bind(s,6476,23)),Promise.resolve().then(s.t.bind(s,4026,23)),Promise.resolve().then(s.bind(s,6271))},6271:function(t,e,s){"use strict";s.r(e),s.d(e,{GameContext:function(){return f},GameContextProvider:function(){return h},useGameData:function(){return c}});var i=s(9268),r=s(6006),l=s(3827);class a{constructor(t){this.state=t}}class n{nextState(t,e){let s=0,i=0;for(let r=Math.max(t-1,0);r<=Math.min(t+1,this.size-1);r++)for(let a=Math.max(e-1,0);a<=Math.min(e+1,this.size-1);a++)(r!==t||a!==e)&&(this.cells[r][a].state===l.f.A?s++:this.cells[r][a].state===l.f.B&&i++);return this.cells[t][e].state===l.f.EMPTY&&s+i===3?s>i?l.f.A:l.f.B:this.cells[t][e].state!==l.f.EMPTY&&(s+i<2||s+i>3)?l.f.EMPTY:this.cells[t][e].state}update(){let t=Array(this.size);for(let e=0;e<this.size;e++){t[e]=Array(this.size);for(let s=0;s<this.size;s++)t[e][s]=this.nextState(e,s)}for(let e=0;e<this.size;e++)for(let s=0;s<this.size;s++)this.cells[e][s].state=t[e][s]}assignCells(t){this.cells=Array(this.size);for(let e=0;e<this.size;e++){this.cells[e]=Array(this.size);for(let s=0;s<this.size;s++)this.cells[e][s]=new a(t[e][s])}}constructor(t,e){this.size=t,this.cells=Array(t);for(let s=0;s<t;s++){this.cells[s]=Array(t);for(let i=0;i<t;i++)this.cells[s][i]=new a(e[s][i])}}}class o{initialStates(){let t=Array(this.size);for(let e=0;e<this.size;e++){t[e]=Array(this.size);for(let s=0;s<this.size;s++)t[e][s]=l.f.EMPTY}return t}checkWin(){for(let t=this.fortress.a.x;t<this.fortress.a.x+this.fortress.a.width;t++)for(let e=this.fortress.a.y;e<this.fortress.a.y+this.fortress.a.height;e++)if(this.grid.cells[e][t].state===l.f.B)return l.f.B;for(let t=this.fortress.b.x;t<this.fortress.b.x+this.fortress.b.width;t++)for(let e=this.fortress.b.y;e<this.fortress.b.y+this.fortress.b.height;e++)if(this.grid.cells[e][t].state===l.f.A)return l.f.A;return!1}getCellStates(){let t=Array(this.size);for(let e=0;e<this.size;e++){t[e]=Array(this.size);for(let s=0;s<this.size;s++)t[e][s]=this.grid.cells[e][s].state}return t}constructor(t,e,s){this.size=t,this.fortress=e,this.grid=new n(t,this.initialStates()),this.initialPlayer=s||.5>Math.random()?l.f.A:l.f.B}}let f=(0,r.createContext)(void 0),h=t=>{let{children:e}=t,[s,a]=(0,r.useState)(l.D.INIT),[n,h]=(0,r.useState)(void 0),[c,u]=(0,r.useState)(void 0),[_,A]=(0,r.useState)({a:0,b:0}),[d,E]=(0,r.useState)(void 0),[y,P]=(0,r.useState)("");(0,r.useEffect)(()=>{let t=new o(20,{a:{x:10,y:1,width:1,height:1},b:{x:10,y:18,width:1,height:1}});h(t),u(t.initialPlayer),E(t.getCellStates()),a(t.initialPlayer===l.f.A?l.D.PLAYER_A:l.D.PLAYER_B)},[]),(0,r.useEffect)(()=>{void 0!==c&&P("Waiting for player ".concat(c," to choose their squares"))},[c]);let v=(0,r.useCallback)((t,e)=>{if(void 0===c||void 0===d)return!1;console.log("handleCellClick: ".concat(t,", ").concat(e));let s=!1,i=[...d];return i[t][e]===c?(i[t][e]=l.f.EMPTY,A({..._,[c]:_[c]-1})):_[c]<3?(i[t][e]=c,A({..._,[c]:_[c]+1})):s=!0,E(i),s},[c,d,_]),z=(0,r.useCallback)(()=>{void 0!==n&&void 0!==d&&void 0!==c&&(n.grid.assignCells(d),A(t=>({...t,[c]:0})),u(c===l.f.A?l.f.B:l.f.A),s===l.D.PLAYER_A&&n.initialPlayer===l.f.A?(u(l.f.B),a(l.D.PLAYER_B)):s===l.D.PLAYER_A&&n.initialPlayer===l.f.B?(u(void 0),a(l.D.GAME_OF_LIFE)):s===l.D.PLAYER_B&&n.initialPlayer===l.f.B?(u(l.f.A),a(l.D.PLAYER_A)):s===l.D.PLAYER_B&&n.initialPlayer===l.f.A&&(u(void 0),a(l.D.GAME_OF_LIFE)))},[n,c,s,d,u,A]);return(0,r.useEffect)(()=>{if(void 0!==n&&s===l.D.GAME_OF_LIFE){let t=()=>(n.grid.update(),E(n.getCellStates()),n.checkWin()),e=0,s=setInterval(function(){let i=t();++e>10?(clearInterval(s),u(n.initialPlayer),a(n.initialPlayer===l.f.A?l.D.PLAYER_A:l.D.PLAYER_B)):!1!=i&&(clearInterval(s),P("Player ".concat(n.checkWin()," wins!")),u(void 0),a(l.D.END))},100)}},[n,s]),(0,i.jsx)(f.Provider,{value:{size:20,gameState:s,player:c,cells:d,fortress:null==n?void 0:n.fortress,selectedCellsCounter:_,statusText:y,setPlayer:u,setSelectedCellsCounter:A,handleCellClick:v,handleValidation:z},children:e})};function c(){let t=r.useContext(f);if(void 0===t)throw Error("useWallet must be used within a WalletProvider");return t}},3827:function(t,e,s){"use strict";var i,r,l,a;s.d(e,{D:function(){return r},f:function(){return i}}),(l=i||(i={})).EMPTY="empty",l.A="a",l.B="b",(a=r||(r={})).INIT="init",a[a.PLAYER_A=i.A]="PLAYER_A",a[a.PLAYER_B=i.B]="PLAYER_B",a.GAME_OF_LIFE="gol",a.END="end"},4026:function(){},6476:function(t){t.exports={style:{fontFamily:"'__Inter_0ec1f4', '__Inter_Fallback_0ec1f4'",fontStyle:"normal"},className:"__className_0ec1f4"}},3177:function(t,e,s){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i=s(6006),r=Symbol.for("react.element"),l=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,n=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function f(t,e,s){var i,l={},f=null,h=null;for(i in void 0!==s&&(f=""+s),void 0!==e.key&&(f=""+e.key),void 0!==e.ref&&(h=e.ref),e)a.call(e,i)&&!o.hasOwnProperty(i)&&(l[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps)void 0===l[i]&&(l[i]=e[i]);return{$$typeof:r,type:t,key:f,ref:h,props:l,_owner:n.current}}e.Fragment=l,e.jsx=f,e.jsxs=f},9268:function(t,e,s){"use strict";t.exports=s(3177)}},function(t){t.O(0,[667,139,744],function(){return t(t.s=5338)}),_N_E=t.O()}]);